# INVS Modern - ‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.

## üìä 1. ‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

### üèóÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å (16 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)

#### 1.1 Master Data (6 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
```
locations          - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö (‡∏Ñ‡∏•‡∏±‡∏á, ‡∏´‡πâ‡∏≠‡∏á‡∏¢‡∏≤, ‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢)
departments        - ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡πÅ‡∏ú‡∏ô‡∏Å ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
budget_types       - ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (OP001-‡∏¢‡∏≤, OP002-‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠)
companies          - ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó/‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢/‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï (816 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
drug_generics      - ‡∏¢‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏°‡∏±‡∏ç (Working Code 7 ‡∏´‡∏•‡∏±‡∏Å, 1,104 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)
drugs              - ‡∏¢‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤ (Trade Name)
```

#### 1.2 Budget Management (2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
```
budget_allocations - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ Q1-Q4)
budget_reservations - ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (Reserve ‚Üí Commit)
```

#### 1.3 Procurement (4 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
```
purchase_requests      - ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠ (PR)
purchase_request_items - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ã‡∏∑‡πâ‡∏≠
purchase_orders        - ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (PO)
purchase_order_items   - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
```

#### 1.4 Inventory Management (3 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
```
inventory              - ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏¢‡∏≤‡∏ï‡∏≤‡∏° location
drug_lots              - ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° lot number ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (FIFO/FEFO)
inventory_transactions - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```

#### 1.5 Receiving (2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
```
receipts      - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á
receipt_items - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤
```

### üîë Key Features
- **Working Code System**: ‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤ 7 ‡∏´‡∏•‡∏±‡∏Å ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
- **FIFO/FEFO Management**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ lot ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
- **Multi-location Inventory**: ‡πÅ‡∏¢‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ï‡∏≤‡∏° location
- **Real-time Budget Control**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏ö‡∏ö real-time
- **Quarterly Budget Tracking**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™

---

## üìã 2. ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡πÄ‡∏ß‡∏ä‡∏†‡∏±‡∏ì‡∏ë‡πå ‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç

### üóÇÔ∏è ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î 5 ‡πÅ‡∏ü‡πâ‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å

#### ‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà 1: **Druglist (‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤)**
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 100%**
- **‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: `drug_generics` + `drugs` + `companies`
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î, ‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤, ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤, ‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï, ‡∏£‡∏≤‡∏Ñ‡∏≤
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å**: Working Code, Trade Name, Manufacturer, Unit Cost

#### ‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà 2: **Purchase Plan (‡πÅ‡∏ú‡∏ô‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤)**
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 100%**
- **‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: `purchase_requests` + `purchase_request_items` + `budget_allocations`
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**: ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ, ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å**: PR Number, Budget Code, Request Amount, Approval Status

#### ‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà 3: **Receipt (‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á)**
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 100%**
- **‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: `receipts` + `receipt_items` + `drug_lots`
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á, Lot number, ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏, ‡∏£‡∏≤‡∏Ñ‡∏≤
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å**: Receipt Number, PO Number, Lot Number, Expiry Date

#### ‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà 4: **Distribution (‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏±‡∏á)**
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚ö†Ô∏è **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° 70%**
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô**: `inventory_transactions` ‡πÅ‡∏ö‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î**: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤, ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö, ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
- **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°**: `drug_distributions` + `drug_distribution_items`

#### ‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà 5: **Inventory (‡∏¢‡∏≤‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á)**
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**: ‚úÖ **‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏ö 100%**
- **‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•**: `inventory` + `drug_lots` + `locations`
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**: ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏¢‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° location ‡πÅ‡∏•‡∏∞ lot
- **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å**: Stock Balance, Min/Max Levels, Location, Lot Details

---

## üîç 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.

### ‚úÖ **‡∏à‡∏∏‡∏î‡πÅ‡∏Ç‡πá‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô**

#### 3.1 Budget Management
- ‚úÖ ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏ö‡πà‡∏á‡∏ï‡∏≤‡∏°‡πÑ‡∏ï‡∏£‡∏°‡∏≤‡∏™ (Q1-Q4) ‡∏ï‡∏≤‡∏°‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏á‡∏ö‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡∏á‡∏ö‡πÅ‡∏ö‡∏ö real-time
- ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏±‡∏ö Purchase Request/Order
- ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô

#### 3.2 Drug Management
- ‚úÖ Working Code System (7 ‡∏´‡∏•‡∏±‡∏Å) ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
- ‚úÖ ‡πÅ‡∏¢‡∏Å‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Generic Name ‡πÅ‡∏•‡∏∞ Trade Name ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢
- ‚úÖ ATC Code ‡πÅ‡∏•‡∏∞ Standard Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≤‡∏Å‡∏•

#### 3.3 Inventory Control
- ‚úÖ FIFO/FEFO Management ‡∏ï‡∏≤‡∏° lot number
- ‚úÖ Multi-location inventory tracking
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô reorder point
- ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏ö‡∏ö real-time

#### 3.4 Procurement Process
- ‚úÖ ‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£: PR ‚Üí PO ‚Üí Receipt ‚Üí Inventory
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
- ‚úÖ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

### ‚ö†Ô∏è **‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á**

#### 3.1 Distribution Management (‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢ 30%)
```sql
-- ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
CREATE TABLE drug_distributions (
  id BIGINT PRIMARY KEY,
  distribution_number VARCHAR(20) UNIQUE,
  distribution_date DATE,
  requesting_department_id BIGINT,
  purpose TEXT,
  approved_by BIGINT,
  status ENUM('pending', 'approved', 'dispensed'),
  total_items INT,
  created_at TIMESTAMP
);

CREATE TABLE drug_distribution_items (
  id BIGINT PRIMARY KEY,
  distribution_id BIGINT,
  drug_id BIGINT,
  lot_number VARCHAR(20),
  quantity_dispensed DECIMAL(10,2),
  unit_cost DECIMAL(10,2),
  expiry_date DATE,
  purpose VARCHAR(100)
);
```

#### 3.2 ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤ ‡∏Å‡∏™‡∏ò.
- ‚ö†Ô∏è **TMT Code** (‡∏£‡∏´‡∏±‡∏™‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.) - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô `drug_generics`
- ‚ö†Ô∏è **24NC Code** (‡∏£‡∏´‡∏±‡∏™ 24 ‡∏´‡∏•‡∏±‡∏Å) - ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô `drugs`
- ‚úÖ **ATC Code** - ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô `drugs`

#### 3.3 Unit Standardization
- ‚ö†Ô∏è **Standard Unit** ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò. - ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏ô `drug_generics`
- ‚ö†Ô∏è **Pack Size Standardization** - ‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ pack size

---

## üí° 4. ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏∞‡πÅ‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô

### üöÄ **Phase 1: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á Distribution (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)**

#### 4.1 ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á Drug Distribution
```sql
-- Prisma Schema ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
model DrugDistribution {
  id               BigInt    @id @default(autoincrement())
  distributionNumber String  @unique @map("distribution_number") @db.VarChar(20)
  distributionDate DateTime  @map("distribution_date") @db.Date
  requestingDeptId BigInt    @map("requesting_dept_id")
  purpose          String?
  approvedBy       BigInt?   @map("approved_by")
  status           DistributionStatus @default(PENDING)
  totalItems       Int       @default(0) @map("total_items")
  totalAmount      Decimal   @default(0) @map("total_amount") @db.Decimal(12, 2)
  createdAt        DateTime  @default(now()) @map("created_at")

  // Relations
  requestingDept   Department @relation(fields: [requestingDeptId], references: [id])
  items            DrugDistributionItem[]

  @@map("drug_distributions")
}

model DrugDistributionItem {
  id               BigInt    @id @default(autoincrement())
  distributionId   BigInt    @map("distribution_id")
  drugId           BigInt    @map("drug_id")
  lotNumber        String    @map("lot_number") @db.VarChar(20)
  quantityDispensed Decimal  @map("quantity_dispensed") @db.Decimal(10, 2)
  unitCost         Decimal   @map("unit_cost") @db.Decimal(10, 2)
  expiryDate       DateTime  @map("expiry_date") @db.Date
  purpose          String?   @db.VarChar(100)

  // Relations
  distribution     DrugDistribution @relation(fields: [distributionId], references: [id])
  drug             Drug      @relation(fields: [drugId], references: [id])

  @@map("drug_distribution_items")
}

enum DistributionStatus {
  PENDING    @map("pending")
  APPROVED   @map("approved")
  DISPENSED  @map("dispensed")
  CANCELLED  @map("cancelled")
}
```

### üîß **Phase 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.**

#### 4.2 ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Drug Generics
```sql
-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô drug_generics
ALTER TABLE drug_generics ADD COLUMN tmt_code VARCHAR(10);
ALTER TABLE drug_generics ADD COLUMN standard_unit VARCHAR(10);
ALTER TABLE drug_generics ADD COLUMN therapeutic_group VARCHAR(50);

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô drugs  
ALTER TABLE drugs ADD COLUMN nc24_code VARCHAR(24);
ALTER TABLE drugs ADD COLUMN registration_number VARCHAR(20);
ALTER TABLE drugs ADD COLUMN gpo_code VARCHAR(15);
```

#### 4.3 ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Prisma Schema
```prisma
model DrugGeneric {
  // ... existing fields
  tmtCode          String?   @map("tmt_code") @db.VarChar(10)
  standardUnit     String?   @map("standard_unit") @db.VarChar(10)
  therapeuticGroup String?   @map("therapeutic_group") @db.VarChar(50)
}

model Drug {
  // ... existing fields
  nc24Code         String?   @map("nc24_code") @db.VarChar(24)
  registrationNumber String? @map("registration_number") @db.VarChar(20)
  gpoCode          String?   @map("gpo_code") @db.VarChar(15)
}
```

### üìä **Phase 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á Export Views**

#### 4.4 Views ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.
```sql
-- View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ü‡πâ‡∏° Druglist
CREATE VIEW export_druglist AS
SELECT 
    dg.working_code,
    dg.drug_name,
    dg.tmt_code,
    dg.dosage_form,
    dg.standard_unit,
    dg.therapeutic_group,
    d.drug_code,
    d.trade_name,
    d.nc24_code,
    d.registration_number,
    c.company_name as manufacturer,
    d.pack_size,
    d.unit
FROM drug_generics dg
LEFT JOIN drugs d ON dg.id = d.generic_id
LEFT JOIN companies c ON d.manufacturer_id = c.id
WHERE dg.is_active = true;

-- View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ü‡πâ‡∏° Purchase Plan
CREATE VIEW export_purchase_plan AS
SELECT 
    pr.pr_number,
    pr.pr_date,
    dept.dept_name,
    bt.budget_name,
    ba.fiscal_year,
    pr.requested_amount,
    pr.status,
    pr.purpose
FROM purchase_requests pr
JOIN departments dept ON pr.department_id = dept.id
JOIN budget_allocations ba ON pr.budget_allocation_id = ba.id
JOIN budget_types bt ON ba.budget_type_id = bt.id
WHERE pr.status != 'DRAFT';

-- View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ü‡πâ‡∏° Receipt
CREATE VIEW export_receipt AS
SELECT 
    r.receipt_number,
    r.receipt_date,
    r.po_id,
    po.po_number,
    ri.drug_id,
    d.drug_code,
    dg.working_code,
    dg.drug_name,
    ri.quantity_received,
    ri.unit_cost,
    ri.lot_number,
    ri.expiry_date,
    c.company_name as vendor
FROM receipts r
JOIN receipt_items ri ON r.id = ri.receipt_id
JOIN drugs d ON ri.drug_id = d.id
JOIN drug_generics dg ON d.generic_id = dg.id
JOIN purchase_orders po ON r.po_id = po.id
JOIN companies c ON po.vendor_id = c.id
WHERE r.status = 'POSTED';

-- View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ü‡πâ‡∏° Distribution (‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á)
CREATE VIEW export_distribution AS
SELECT 
    dd.distribution_number,
    dd.distribution_date,
    dept.dept_name as requesting_department,
    ddi.drug_id,
    d.drug_code,
    dg.working_code,
    dg.drug_name,
    ddi.quantity_dispensed,
    ddi.unit_cost,
    ddi.lot_number,
    ddi.expiry_date,
    ddi.purpose
FROM drug_distributions dd
JOIN drug_distribution_items ddi ON dd.id = ddi.distribution_id
JOIN departments dept ON dd.requesting_dept_id = dept.id
JOIN drugs d ON ddi.drug_id = d.id
JOIN drug_generics dg ON d.generic_id = dg.id
WHERE dd.status = 'DISPENSED';

-- View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ü‡πâ‡∏° Inventory
CREATE VIEW export_inventory AS
SELECT 
    dg.working_code,
    dg.drug_name,
    d.drug_code,
    d.trade_name,
    l.location_name,
    inv.quantity_on_hand,
    inv.min_level,
    inv.max_level,
    inv.average_cost,
    dl.lot_number,
    dl.expiry_date,
    dl.quantity_available,
    dl.unit_cost,
    CURRENT_DATE as report_date
FROM inventory inv
JOIN drugs d ON inv.drug_id = d.id
JOIN drug_generics dg ON d.generic_id = dg.id
JOIN locations l ON inv.location_id = l.id
LEFT JOIN drug_lots dl ON d.id = dl.drug_id AND l.id = dl.location_id
WHERE inv.quantity_on_hand > 0 AND dl.is_active = true;
```

### üìà **‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á**

| ‡πÅ‡∏ü‡πâ‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | ‡∏Å‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á | ‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á | ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ |
|------------|-------------|-------------|-------------|
| **Druglist** | ‚úÖ 100% | ‚úÖ 100% | ‡πÄ‡∏û‡∏¥‡πà‡∏° TMT Code |
| **Purchase Plan** | ‚úÖ 100% | ‚úÖ 100% | ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |
| **Receipt** | ‚úÖ 100% | ‚úÖ 100% | ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |
| **Distribution** | ‚ö†Ô∏è 70% | ‚úÖ 100% | ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á Distribution |
| **Inventory** | ‚úÖ 100% | ‚úÖ 100% | ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |

### üéØ **‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤**

1. **‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô**: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á `drug_distributions` ‡πÅ‡∏•‡∏∞ `drug_distribution_items`
2. **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**: ‡πÄ‡∏û‡∏¥‡πà‡∏° TMT Code ‡πÅ‡∏•‡∏∞ NC24 Code ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò.
3. **‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ**: ‡∏™‡∏£‡πâ‡∏≤‡∏á Export Views ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 5 ‡πÅ‡∏ü‡πâ‡∏°
4. **‡πÄ‡∏™‡∏£‡∏¥‡∏°**: API endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏Å‡∏™‡∏ò.

**‡∏™‡∏£‡∏∏‡∏õ**: ‡∏£‡∏∞‡∏ö‡∏ö INVS Modern ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏° **90%** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏Å‡∏™‡∏ò. ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô Distribution Management ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

---

*‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö INVS Modern ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡πÄ‡∏ß‡∏ä‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç*